.:53 {
    errors
    log

    # rewrite incoming *.carrot -> *.onion for the upstream resolver
    # and rewrite answer from *.onion back to *.carrot so the QUESTION/ANSWER match.
    rewrite stop {
        name regex (.*)\.carrot {1}.onion
        answer name (.*)\.onion {1}.carrot
    }

    # forward dns queries to the tor container on the dns resolver port
    forward . 172.96.0.21:5353

    cache 30
}
